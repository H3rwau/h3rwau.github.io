(()=>{var r={updateHeaderHeight(){requestAnimationFrame(()=>{let t=DOMUtils.find("header nav");if(t){let e=t.offsetHeight;document.documentElement.style.setProperty("--header-height",e+"px");let n=DOMUtils.find("#sidebar-menu nav"),i=DOMUtils.find("#toc-container nav");n&&(n.style.top="calc(var(--header-height) + 1rem)"),i&&(i.style.top="calc(var(--header-height) + 1rem)")}})},close(t){let e=t.closest("[data-banner]");e&&(window._bannerObserver&&window._bannerObserver.disconnect(),e.style.transition="height 0.2s ease-out, opacity 0.2s ease-out",e.style.height=e.offsetHeight+"px",e.style.opacity="1",e.offsetHeight,e.style.height="0",e.style.opacity="0",e.style.overflow="hidden",e.addEventListener("transitionend",function n(){e.remove(),r.updateHeaderHeight(),e.removeEventListener("transitionend",n)}))},init(){this.updateHeaderHeight(),window.addEventListener("resize",()=>this.updateHeaderHeight());let t=DOMUtils.find("[data-banner]");if(t){window._bannerObserver=new MutationObserver(()=>this.updateHeaderHeight()),window._bannerObserver.observe(t,{attributes:!0,childList:!0,subtree:!0,characterData:!0});let e=DOMUtils.find("[data-banner-close]",t);e&&e.addEventListener("click",()=>this.close(e))}}};window.PageForge=window.PageForge||{};window.PageForge.Banner=r;})();

(()=>{var i={copy(c){let{find:n,toggleClass:o}=DOMUtils,d=n("code",c.closest("div"));d&&navigator.clipboard.writeText(d.textContent).then(()=>{let e=n(".copy-icon",c),t=n(".check-icon",c);o(e,"!hidden"),o(t,"!hidden"),setTimeout(()=>{o(e,"!hidden"),o(t,"!hidden")},800)}).catch(e=>console.error("Failed to copy text:",e))}};window.PageForge=window.PageForge||{};window.PageForge.CodeCopy=i;})();

(()=>{var g={init(){var r,i,l;let d=document.querySelectorAll(".prose *:not(h1):not(.text-3xl)"),n=Array.from(d).filter(t=>!t.closest(".not-prose"));if(!n.length)return;let e=["text-sm","text-base","text-lg","text-xl"],o=1,s=localStorage.getItem("content-font-size");s&&(n.forEach(t=>{t.classList.remove(...e),t.classList.add(s)}),o=e.indexOf(s));let c=t=>{t>=0&&t<e.length&&(n.forEach(a=>{a.classList.remove(...e),a.classList.add(e[t])}),localStorage.setItem("content-font-size",e[t]),o=t)};(r=document.getElementById("increase-font"))==null||r.addEventListener("click",()=>c(o+1)),(i=document.getElementById("decrease-font"))==null||i.addEventListener("click",()=>c(o-1)),(l=document.getElementById("reset-font"))==null||l.addEventListener("click",()=>c(1))}};window.PageForge=window.PageForge||{};window.PageForge.FontSizeControl=g;})();

(()=>{var h={formatNumber(t){return t>=1e6?(t/1e6).toFixed(1)+"m":t>=1e3?(t/1e3).toFixed(1)+"k":t.toString()},showLoading(){if(!this.styleAdded){let t=document.createElement("style");t.textContent=`
                .skeleton-loader {
                    width: 60px;
                    height: 16px;
                    background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
                    background-size: 200% 100%;
                    animation: loading 1.5s infinite;
                    border-radius: 4px;
                }
                @keyframes loading {
                    0% { background-position: 200% 0; }
                    100% { background-position: -200% 0; }
                }
            `,document.head.appendChild(t),this.styleAdded=!0}this.updateUI({tag:'<div class="skeleton-loader"></div>',stars:'<div class="skeleton-loader"></div>',forks:'<div class="skeleton-loader"></div>'})},async fetchStats(t,a){var n;let e=`github-stats-${t}-${a}`,i=localStorage.getItem(e),o=localStorage.getItem(`${e}-time`);if(this.showLoading(),i&&o&&Date.now()-parseInt(o)<36e5){let s=JSON.parse(i);return this.updateUI(s),s}try{let s={Accept:"application/vnd.github.v3+json","User-Agent":"PageForge-Docs"},[r,l]=await Promise.all([fetch(`https://api.github.com/repos/${t}/${a}`,{headers:s}),fetch(`https://api.github.com/repos/${t}/${a}/tags`,{headers:s})]);if(!r.ok||!l.ok)throw new Error("GitHub API request failed");let[g,d]=await Promise.all([r.json(),l.json()]),c={stars:this.formatNumber(g.stargazers_count||0),forks:this.formatNumber(g.forks_count||0),tag:((n=d[0])==null?void 0:n.name)||"-"};return localStorage.setItem(e,JSON.stringify(c)),localStorage.setItem(`${e}-time`,Date.now().toString()),this.updateUI(c),c}catch(s){console.error("\u{1F92F} \u83B7\u53D6 GitHub Stats \u5931\u8D25",s);let r={stars:"-",forks:"-",tag:"-"};return this.updateUI(r),r}},updateUI(t){if(!t)return;let{findAll:a}=DOMUtils,e={tag:a(".tag-container"),stars:a(".stars-container"),forks:a(".forks-container")},i={tag:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16" fill="currentColor"><path d="M1 7.775V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.75 1.75 0 0 1 1 7.775Zm1.5 0c0 .066.026.13.073.177l6.25 6.25a.25.25 0 0 0 .354 0l5.025-5.025a.25.25 0 0 0 0-.354l-6.25-6.25a.25.25 0 0 0-.177-.073H2.75a.25.25 0 0 0-.25.25ZM6 5a1 1 0 1 1 0 2 1 1 0 0 1 0-2Z"></path></svg>',stars:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16" fill="currentColor"><path d="M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.751.751 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25Z"/></svg>',forks:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16" fill="currentColor"><path d="M5 5.372v.878c0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75v-.878a2.25 2.25 0 1 1 1.5 0v.878a2.25 2.25 0 0 1-2.25 2.25h-1.5v2.128a2.251 2.251 0 1 1-1.5 0V8.5h-1.5A2.25 2.25 0 0 1 3.5 6.25v-.878a2.25 2.25 0 1 1 1.5 0ZM5 3.25a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0Zm6.75.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm-3 8.75a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0Z"/></svg>'};Object.entries(e).forEach(([o,n])=>{n.forEach(s=>{s.innerHTML=`${i[o]} ${t[o]}`})})},init(t,a){if(!t||!a)return;this.showLoading();let e=async()=>await this.fetchStats(t,a);e(),setInterval(e,36e5)}};window.PageForge=window.PageForge||{};window.PageForge.GitHubStats=h;})();

(()=>{var n={DarkMode:{observer:null,initObserver(){this.observer||(this.observer=new MutationObserver(t=>{t.forEach(e=>{if(e.attributeName==="class"){let o=document.documentElement.classList.contains("dark");document.documentElement.setAttribute("data-theme",o?"dark":"light"),localStorage.setItem("theme",o?"dark":"light")}})}),this.observer.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}))},init(){let t=localStorage.theme==="dark"||!("theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches,e=document.documentElement;t?(e.classList.add("dark"),e.setAttribute("data-theme","dark")):(e.classList.remove("dark"),e.setAttribute("data-theme","light")),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o=>{localStorage.theme||(o.matches?(e.classList.add("dark"),e.setAttribute("data-theme","dark")):(e.classList.remove("dark"),e.setAttribute("data-theme","light")),this.updateIcons(o.matches))}),this.initObserver(),this.updateIcons(t)},updateIcons(t){let e=document.querySelectorAll("[data-theme-toggle] .sun-icon"),o=document.querySelectorAll("[data-theme-toggle] .moon-icon");e.forEach(s=>{s.classList.toggle("hidden",!t)}),o.forEach(s=>{s.classList.toggle("hidden",t)})},toggle(){let t=document.documentElement,e=t.classList.contains("dark");t.classList.toggle("dark"),t.setAttribute("data-theme",e?"light":"dark"),this.updateIcons(!e)}},MobileMenu:{toggle(){let t=document.getElementById("mobile-menu"),e=document.querySelector("[data-menu-toggle]");if(t&&e){t.classList.toggle("hidden");let o=e.querySelector(".menu-icon"),s=e.querySelector(".close-icon");o&&s&&(o.classList.toggle("hidden"),s.classList.toggle("hidden"))}}},initEventListeners(){document.querySelectorAll("[data-theme-toggle]").forEach(o=>{o.onclick=()=>this.DarkMode.toggle()});let e=document.querySelector("[data-menu-toggle]");e&&(e.onclick=()=>this.MobileMenu.toggle())},init(){this.DarkMode.init(),this.initEventListeners(),new MutationObserver(()=>{this.initEventListeners()}).observe(document.body,{childList:!0,subtree:!0})}};window.PageForge=window.PageForge||{};window.PageForge.Header=n;})();

(()=>{function a(){let r=document.createElement("div");r.id="reading-progress-container";let s=document.createElement("div");s.id="reading-progress-bar";let t=document.createElement("div");t.id="reading-progress-indicator",t.className="fixed right-4 bottom-4 bg-gray-800 dark:bg-gray-700 text-white px-3 py-2 rounded-full text-sm font-medium opacity-80 hover:opacity-100 transition-opacity",t.innerHTML="0%",r.appendChild(s),document.body.appendChild(r),document.body.appendChild(t);let l=document.querySelector(".article-content")||document.querySelector("main")||document.body,p=document.title,g=()=>{let n=l.getBoundingClientRect(),o=n.top+window.scrollY,i=n.height-window.innerHeight;return{start:o,height:i}};function u(n,o){let e=!1;return function(){e||(n.apply(this,arguments),e=!0,setTimeout(function(){e=!1},o))}}function d(){let n=g(),o=window.scrollY-n.start,e=0;o>0&&(e=Math.min(100,Math.max(0,o/n.height*100)));let i=Math.round(e);s.style.width=`${e}%`,t.textContent=`${i}%`,i>0&&i<100?t.classList.remove("hidden"):t.classList.add("hidden")}let c=u(d,100);window.addEventListener("scroll",c,{passive:!0}),window.addEventListener("resize",c,{passive:!0}),d(),t.addEventListener("click",function(){window.scrollTo({top:0,behavior:"smooth"})})}document.readyState==="complete"?a():window.addEventListener("load",a);})();

(()=>{var c={searchIndex:null,searchTimeout:null,isOpen:!1,els:{},init(){if(this.els.searchTrigger=document.querySelector("#search-trigger"),this.els.searchDialog=document.querySelector("#search-dialog"),this.els.searchInput=document.querySelector("#site-search"),this.els.searchClose=document.querySelector("#search-close"),this.els.searchResults=document.querySelector("#search-results"),!this.els.searchDialog||!this.els.searchInput||!this.els.searchResults){console.error("Required search elements not found");return}this.bindEvents()},bindEvents(){document.addEventListener("keydown",e=>{(e.metaKey||e.ctrlKey)&&e.key==="k"&&(e.preventDefault(),this.toggleSearch()),e.key==="Escape"&&this.isOpen&&this.closeSearch()}),this.els.searchTrigger&&this.els.searchTrigger.addEventListener("click",e=>{e.preventDefault(),this.toggleSearch()}),this.els.searchClose&&this.els.searchClose.addEventListener("click",()=>{this.closeSearch()}),this.els.searchDialog.addEventListener("click",e=>{e.target===this.els.searchDialog&&this.closeSearch()}),this.els.searchInput.addEventListener("input",e=>{let t=e.target.value.trim();if(this.searchTimeout&&clearTimeout(this.searchTimeout),t.length<2){this.showEmptyState();return}this.searchTimeout=setTimeout(()=>{this.performSearch(t)},300)})},toggleSearch(){this.isOpen?this.closeSearch():(this.els.searchDialog.classList.remove("hidden"),this.els.searchDialog.classList.add("flex"),this.els.searchInput.focus(),this.isOpen=!0,document.body.style.overflow="hidden")},closeSearch(){this.els.searchDialog.classList.add("hidden"),this.els.searchDialog.classList.remove("flex"),this.els.searchInput.value="",this.isOpen=!1,document.body.style.overflow="",this.showEmptyState()},showEmptyState(){this.els.searchResults.innerHTML=`
            <div class="search-empty-state px-6 py-14 text-center text-sm sm:px-14">
                <svg class="mx-auto h-6 w-6 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                </svg>
                <p class="mt-4 text-gray-500 dark:text-gray-400">\u641C\u7D22\u6587\u6863\u5185\u5BB9...</p>
                <p class="mt-2 text-xs text-gray-500 dark:text-gray-400">\u6309 ESC \u5173\u95ED</p>
            </div>
        `},async loadSearchIndex(){if(!this.searchIndex)try{let e=this.els.searchDialog.dataset.version,t=await fetch(e?`/${e}/search-index.json`:"/search-index.json");this.searchIndex=await t.json()}catch(e){console.error("Failed to load search index:",e)}},highlightText(e,t){if(!e||!t)return e;let s=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),r=new RegExp(`(${s})`,"gi");return e.replace(r,'<mark class="bg-yellow-200 dark:bg-yellow-800 dark:text-gray-100">$1</mark>')},getContentExcerpt(e,t,s=160){if(!e||!t)return e;let r=e.toLowerCase(),a=t.toLowerCase(),i=r.indexOf(a);if(i===-1)return e.substring(0,s);let l=Math.max(0,i-60),h=Math.min(e.length,i+100);return(l>0?"...":"")+e.substring(l,h)+(h<e.length?"...":"")},async performSearch(e){if(await this.loadSearchIndex(),!this.searchIndex)return;let t=this.searchIndex.filter(s=>{let r=s.title.toLowerCase().includes(e.toLowerCase()),a=s.content.toLowerCase().includes(e.toLowerCase());return r||a}).slice(0,8);if(t.length===0){this.els.searchResults.innerHTML=`
                <div class="px-6 py-14 text-center text-sm sm:px-14">
                    <svg class="mx-auto h-6 w-6 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
                    </svg>
                    <p class="mt-4 text-gray-500 dark:text-gray-400">\u672A\u627E\u5230\u76F8\u5173\u7ED3\u679C</p>
                </div>
            `;return}this.els.searchResults.innerHTML=`
            <div class="divide-y divide-gray-100 dark:divide-gray-800">
                ${t.map(s=>{let r=this.highlightText(s.title,e),a=this.getContentExcerpt(s.content,e),i=this.highlightText(a,e);return`
                        <a href="${s.url}" 
                           class="block px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700/50">
                            <div class="text-sm font-medium text-gray-900 dark:text-gray-100">
                                ${r}
                                ${s.lang?`<span class="ml-2 text-xs px-1.5 py-0.5 rounded-full bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300">${s.lang}</span>`:""}
                            </div>
                            <div class="mt-1 text-sm text-gray-500 dark:text-gray-400 line-clamp-2">
                                ${i}
                            </div>
                        </a>
                    `}).join("")}
            </div>
        `}};window.addEventListener("load",()=>{c.init()});})();

(()=>{var b={init(){if(!document.getElementById("toc-styles")){let t=document.createElement("style");t.id="toc-styles",t.textContent=`
                .toc-link.active-toc-item {
                    background-color: rgb(239 246 255);
                    color: rgb(37 99 235);
                    position: relative;
                }
                .dark .toc-link.active-toc-item {
                    background-color: rgba(30 58 138 / 0.2);
                    color: rgb(96 165 250);
                }
                .toc-link.active-toc-item::before {
                    content: '';
                    position: absolute;
                    left: 0;
                    top: 50%;
                    transform: translateY(-50%);
                    width: 3px;
                    height: 16px;
                    background-color: rgb(37 99 235);
                    border-top-right-radius: 2px;
                    border-bottom-right-radius: 2px;
                }
                .dark .toc-link.active-toc-item::before {
                    background-color: rgb(96 165 250);
                }
            `,document.head.appendChild(t)}let g=document.querySelectorAll(".toc-link");g.forEach(t=>{t.addEventListener("click",a=>{a.preventDefault(),g.forEach(o=>o.classList.remove("active-toc-item")),t.classList.add("active-toc-item");let l=t.getAttribute("data-slug"),n=document.getElementById(l),i=document.querySelector("header nav"),c=i?i.offsetHeight+10:80,d=n.getBoundingClientRect().top+window.pageYOffset-c;window.scrollTo({top:d,behavior:"smooth"});let e=document.getElementById("toc-mobile");e&&e.classList.add("translate-y-full")})});let r=()=>{let t=document.querySelector("header nav"),a=t?t.offsetHeight:0,l=Array.from(document.querySelectorAll("[id].inline-flex")),n=null,i=1/0;if(l.forEach(c=>{let e=c.getBoundingClientRect().top-a-20,o=Math.abs(e);e<=10&&o<i&&(i=o,n=c)}),n){let c=n.id;document.querySelectorAll(".toc-link").forEach(e=>{if(e.getAttribute("data-slug")===c){e.classList.add("active-toc-item");let o=e.closest(".overflow-y-auto");if(o){let u=o.getBoundingClientRect(),m=e.getBoundingClientRect();(m.top<u.top||m.bottom>u.bottom)&&e.scrollIntoView({behavior:"smooth",block:"center"})}}else e.classList.remove("active-toc-item")})}},f=new IntersectionObserver(t=>{t.forEach(()=>{requestAnimationFrame(r)})},{rootMargin:"-20% 0px -80% 0px",threshold:[0,1]});document.querySelectorAll("[id].inline-flex").forEach(t=>{f.observe(t)});let s;window.addEventListener("scroll",()=>{s&&window.cancelAnimationFrame(s),s=window.requestAnimationFrame(r)},{passive:!0}),r()}};window.PageForge=window.PageForge||{};window.PageForge.TOC=b;})();

(()=>{window.DOMUtils={find:(l,o=document)=>o.querySelector(l),findAll:(l,o=document)=>o.querySelectorAll(l),toggleClass:(l,o)=>l==null?void 0:l.classList.toggle(o)};})();

(()=>{document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{window.PageForge.Banner.init(),window.PageForge.Header.init(),window.PageForge.FontSizeControl.init(),window.PageForge.TOC.init()}):(window.PageForge.Banner.init(),window.PageForge.Header.init(),window.PageForge.FontSizeControl.init());})();

